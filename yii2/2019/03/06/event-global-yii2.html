<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Event Global Yii2 | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Event Global Yii2" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:" />
<meta property="og:description" content="Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:" />
<link rel="canonical" href="https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html" />
<meta property="og:url" content="https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-06T10:14:42+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Event Global Yii2" />
<script type="application/ld+json">
{"@type":"BlogPosting","description":"Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:","headline":"Event Global Yii2","dateModified":"2019-03-06T10:14:42+07:00","datePublished":"2019-03-06T10:14:42+07:00","url":"https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html"},"author":{"@type":"Person","name":"Agus Susilo"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://susilolab.github.io/feed.xml" title="susilolab" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-173956394-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Event Global Yii2 | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Event Global Yii2" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:" />
<meta property="og:description" content="Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:" />
<link rel="canonical" href="https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html" />
<meta property="og:url" content="https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-06T10:14:42+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Event Global Yii2" />
<script type="application/ld+json">
{"@type":"BlogPosting","description":"Event pada yii2 telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar PHP7 dan Yii2. Secara sederhana event pada yii2 mirip event pada jquery dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan on dan untuk mentrigger event menggunakan fungsi trigger. Detil fungsi on dan trigger dapat dilihat dibawah ini:","headline":"Event Global Yii2","dateModified":"2019-03-06T10:14:42+07:00","datePublished":"2019-03-06T10:14:42+07:00","url":"https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/yii2/2019/03/06/event-global-yii2.html"},"author":{"@type":"Person","name":"Agus Susilo"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
  







</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">susilolab</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/portfolio/">My Portfolio</a><a class="page-link" href="/rust-book/">Rust Book</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Event Global Yii2</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-03-06T10:14:42+07:00" itemprop="datePublished">Mar 6, 2019
      </time>
      
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Event pada <code class="language-plaintext highlighter-rouge">yii2</code> telah ditulis ulang dari versi sebelumnya dan disempurnakan sehingga lebih mudah dan dapat digunakan secara global. Nah kali ini saya ingin berbagai sedikit tip bagaimana membuat event secara global di Yii2. Saya asumsikan bahwa kamu sudah memiliki pengetahuan tentang dasar-dasar <strong>PHP7</strong> dan <strong>Yii2</strong>.</p>

<p>Secara sederhana event pada yii2 mirip event pada <strong>jquery</strong> dan cara pemakaiannya pun mirip. Untuk listening pada event tertentu kita gunakan <strong>on</strong> dan untuk mentrigger event menggunakan fungsi <strong>trigger</strong>. Detil fungsi on dan trigger dapat dilihat dibawah ini:
<!--more--></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nc">Event</span><span class="o">::</span><span class="nf">on</span><span class="p">(</span><span class="nv">$class</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$handle</span><span class="p">,</span> <span class="nv">$data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">$append</span> <span class="o">=</span> <span class="kc">true</span><span class="p">);</span>
<span class="nc">Event</span><span class="o">::</span><span class="nf">trigger</span><span class="p">(</span><span class="nv">$class</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$event</span> <span class="o">=</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<p>Tiga parameter utama pada fungsi <code class="language-plaintext highlighter-rouge">on</code> wajib ada, sedangkan selebihnya boleh diabaikan. Karena kita akan fokus pada bagaimana menggunakan event yii2 secara global maka kita hanya akan menggunakan 3 parameter pertama. contoh penggunaan event secara umum seperti berikut:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">// SiteController.php</span>
<span class="mf">...</span>
<span class="kn">use</span> <span class="nc">yii\base\Event</span><span class="p">;</span>

<span class="mf">...</span>
<span class="k">const</span> <span class="no">EVENT_HELLO</span> <span class="o">=</span> <span class="s1">'hello'</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="n">init</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">parent</span><span class="o">::</span><span class="nf">init</span><span class="p">();</span>
  <span class="nc">Event</span><span class="o">::</span><span class="nf">on</span><span class="p">(</span><span class="k">self</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="k">self</span><span class="o">::</span><span class="no">EVENT_HELLO</span><span class="p">,</span> <span class="p">[</span><span class="k">self</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="s1">'helloLog'</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="n">actionIndex</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Event</span><span class="p">();</span>
  <span class="nc">Event</span><span class="o">::</span><span class="nf">trigger</span><span class="p">(</span><span class="k">self</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="k">self</span><span class="o">::</span><span class="no">EVENT_HELLO</span><span class="p">,</span> <span class="nv">$event</span><span class="p">);</span>
  <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">render</span><span class="p">(</span><span class="s1">'index'</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">helloLog</span><span class="p">()</span>
<span class="p">{</span>
  <span class="nc">Yii</span><span class="o">::</span><span class="nf">error</span><span class="p">(</span><span class="s1">'---Hello world---'</span><span class="p">);</span> 
<span class="p">}</span>
<span class="mf">...</span></code></pre></figure>

<p>Pada contoh di atas kita mengimport klas <code class="language-plaintext highlighter-rouge">Event</code> kemudian membuat konstanta nama event. Lalu pada fungsi <code class="language-plaintext highlighter-rouge">init</code> kita mendaftarkan event melalui fungsi <code class="language-plaintext highlighter-rouge">on</code> dengan nama fungsi yang akan dijalankan setelah event ditrigger yaitu <code class="language-plaintext highlighter-rouge">helloLog</code>. Selanjutnya pada fungsi <code class="language-plaintext highlighter-rouge">actionIndex</code> kita mentrigger event <code class="language-plaintext highlighter-rouge">EVENT_HELLO</code> memakai fungsi trigger.</p>

<p>Perhatikan parameter ketiga, karena fungsi <code class="language-plaintext highlighter-rouge">helloLog</code> bertipe static maka nama klasnya menggunakan <code class="language-plaintext highlighter-rouge">self::className</code>. Jika menggunakan fungsi yang bukan static kita bisa menggunakan <code class="language-plaintext highlighter-rouge">$this</code> seperti ini:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nc">Event</span><span class="o">::</span><span class="nf">on</span><span class="p">(</span><span class="k">self</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="k">self</span><span class="o">::</span><span class="no">EVENT_HELLO</span><span class="p">,</span> <span class="p">[</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">'helloLog'</span><span class="p">]);</span></code></pre></figure>

<p>Kemudian jalankan dengan mengakses controller site, jika tidak ada error maka akan ada log error dengan pesan hello world pada file <code class="language-plaintext highlighter-rouge">runtime/logs/app.log</code> seperti berikut ini:</p>

<p><img src="/assets/img/001-2019-03-06-event-globalyii2.png" alt="event-global" /></p>

<p>Semoga dengan penjelasan dan contoh di atas kita sudah bisa memahami dasar-dasar event pada <code class="language-plaintext highlighter-rouge">yii2</code>, sekarang kita bikin event listenernya secara global sehingga kita dapat memicu/mentriggernya dari mana saja(model/controller/module). Agar event dapat didaftarkan secara global pada saat aplikasinya jalan maka kita akan menggunakan BootstrapInterface. kita akan bikin klas implementasi dari BootstrapInterface.</p>

<p>Pertama kita bikin klas dengan nama <code class="language-plaintext highlighter-rouge">EventAutoLoader.php</code> pada folder <code class="language-plaintext highlighter-rouge">nama_app/components</code>, Klas ini berguna agar aplikasi dapat memuat konfigurasi event-event pada saat proses booting aplikasi. klas ini turunan dari <code class="language-plaintext highlighter-rouge">BootstrapInterface</code> yang hanya memiliki satu definisi fungsi yang harus di implementasikan pada klas turunan.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">app\components</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Yii</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">yii\base\BootstrapInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">yii\base\Event</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">EventAutoLoader</span> <span class="kd">implements</span> <span class="nc">BootstrapInterface</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="k">function</span> <span class="n">bootstrap</span><span class="p">(</span><span class="nv">$app</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nv">$eventConfigFile</span> <span class="o">=</span> <span class="k">require</span><span class="p">(</span><span class="nc">Yii</span><span class="o">::</span><span class="nf">getAlias</span><span class="p">(</span><span class="s1">'@app'</span><span class="p">)</span> <span class="mf">.</span> <span class="s1">'/config/event-config.php'</span><span class="p">);</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$eventConfigFile</span> <span class="k">as</span> <span class="nv">$config</span><span class="p">)</span> <span class="p">{</span>
      <span class="nc">Event</span><span class="o">::</span><span class="nf">on</span><span class="p">(</span><span class="nv">$config</span><span class="p">[</span><span class="s1">'class'</span><span class="p">],</span> <span class="nv">$config</span><span class="p">[</span><span class="s1">'event'</span><span class="p">],</span> <span class="nv">$config</span><span class="p">[</span><span class="s1">'callback'</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Kemudian buka file <code class="language-plaintext highlighter-rouge">config/web.php</code> dan tambahkan klas yang baru saja kita buat pada config <code class="language-plaintext highlighter-rouge">bootstrap</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="s1">'bootstrap'</span> <span class="o">=&gt;</span> <span class="p">[</span>
  <span class="mf">...</span>
  <span class="s1">'app\components\EventAutoLoader'</span><span class="p">,</span>
  <span class="mf">...</span>
<span class="p">],</span></code></pre></figure>

<p>Tak lupa buat file dengan nama event-config.php pada folder config untuk menyimpan semua event dan event handler. Dan isinya kurang lebih seperti ini:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">app\controllers\SiteController</span><span class="p">;</span>

<span class="k">return</span> <span class="p">[</span>
  <span class="p">[</span>
    <span class="s1">'class'</span>    <span class="o">=&gt;</span> <span class="nc">SiteController</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span>
    <span class="s1">'event'</span>    <span class="o">=&gt;</span> <span class="nc">SiteController</span><span class="o">::</span><span class="no">EVENT_HELLO</span><span class="p">,</span>
    <span class="s1">'callback'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nc">SiteController</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="s1">'helloLog'</span><span class="p">],</span>
  <span class="p">]</span>
<span class="p">];</span></code></pre></figure>

<p>Sampai tahap ini kita sudah mendaftarkan event secara global dan event tersebut dapat kita dari mana saja, karena klas <code class="language-plaintext highlighter-rouge">EventAutoLoader</code> akan dijalankan pada saat aplikasi booting pertama kali. Untuk memastikan bahwa event dapat dipanggil dari mana saja, kita akan membuat controller baru dengan nama <code class="language-plaintext highlighter-rouge">HelloController</code> dan mentrigger event yang ada di <code class="language-plaintext highlighter-rouge">SiteController</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">app\controllers</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Yii</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">yii\web\Controller</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">yii\base\Event</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">app\controllers\SiteController</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">HelloController</span> <span class="kd">extends</span> <span class="nc">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">actionIndex</span><span class="p">()</span>
    <span class="p">{</span>
      <span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Event</span><span class="p">();</span>
      <span class="nc">Event</span><span class="o">::</span><span class="nf">trigger</span><span class="p">(</span><span class="nc">SiteController</span><span class="o">::</span><span class="nf">className</span><span class="p">(),</span> <span class="nc">SiteController</span><span class="o">::</span><span class="no">EVENT_HELLO</span><span class="p">,</span> <span class="nv">$event</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Kemudian akses hello controller melalui browser, jika semua lancar maka akan ada pesan Hello world di <code class="language-plaintext highlighter-rouge">app.log</code></p>

<p><img src="/assets/img/002-2019-03-06-event-globalyii2.png" alt="event-global" /></p>

<p>Sekian untuk artikel kali semoga bermanfaat. Insya Allah pada artikel berikutnya saya akan membahas sedikit bagaimana melewatkan data pada event yang telah kita buat. Apabila kamu mempunyai saran dan kritik untuk artikel jangan sungkan2 untuk berkomentar dibawah.</p>

  </div><a class="u-url" href="/yii2/2019/03/06/event-global-yii2.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper"><div class="footer-col-wrapper">
      <div class="footer-col footer-col-3"><ul class="social-media-list"><li><a href="https://github.com/susilolab"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">susilolab</span></a></li><li><a href="https://instagram.com/mas.agus"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg> <span class="username">mas.agus</span></a></li><li><a href="https://www.twitter.com/susil0"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">susil0</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>&quot;Sebaik-baik manusia adalah yang paling bermanfaat bagi manusia&quot; (HR. Ahmad, ath-Thabrani, ad-Daruqutni)</p>
        <p>&copy;2021&nbsp;Agus Susilo</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
