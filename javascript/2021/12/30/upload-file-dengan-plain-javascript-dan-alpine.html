<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Upload file dengan plain Javascript dan Alpine | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Upload file dengan plain Javascript dan Alpine" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat." />
<meta property="og:description" content="Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat." />
<link rel="canonical" href="https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html" />
<meta property="og:url" content="https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-30T06:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Upload file dengan plain Javascript dan Alpine" />
<script type="application/ld+json">
{"headline":"Upload file dengan plain Javascript dan Alpine","dateModified":"2021-12-30T06:00:00+07:00","datePublished":"2021-12-30T06:00:00+07:00","url":"https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html","author":{"@type":"Person","name":"Agus Susilo"},"description":"Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat.","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://susilolab.github.io/feed.xml" title="susilolab" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-173956394-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Upload file dengan plain Javascript dan Alpine | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Upload file dengan plain Javascript dan Alpine" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat." />
<meta property="og:description" content="Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat." />
<link rel="canonical" href="https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html" />
<meta property="og:url" content="https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-30T06:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Upload file dengan plain Javascript dan Alpine" />
<script type="application/ld+json">
{"headline":"Upload file dengan plain Javascript dan Alpine","dateModified":"2021-12-30T06:00:00+07:00","datePublished":"2021-12-30T06:00:00+07:00","url":"https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html","author":{"@type":"Person","name":"Agus Susilo"},"description":"Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat.","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
  







</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">susilolab</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/categories/">Categories</a><a class="page-link" href="/portfolio/">My Portfolio</a><a class="page-link" href="/rust-book/">Rust Book</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Upload file dengan plain Javascript dan Alpine</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-12-30T06:00:00+07:00" itemprop="datePublished">Dec 30, 2021
      </time>
      
      
      â€¢ categories:  
      
      <a href="/categories/#javascript">javascript</a>
      
      
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Kali ini saya ingin berbagi tips bagaimana mengupload file pada saat file input berubah. Disini saya hanya menggunakan pustaka javascript yang bernama 
alpine, tulisan ini saya buat berdasarkan pengalaman setelah membuat form upload pada proyek yang saya buat.
<!--more--></p>

<p>Pertama-tama buat folder <code class="language-plaintext highlighter-rouge">upload-file</code> lalu buat file <code class="language-plaintext highlighter-rouge">index.html</code>. Pertama kita akan membuat form untuk upload file. Ketikan atau copas kode berikut 
di dalam body html.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">x-data=</span><span class="s">"uploadPage"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"file-name"</span> <span class="err">@</span><span class="na">change=</span><span class="s">"handleFileUpload($event)"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Disini kita membuat satu buah input dengan tipe <code class="language-plaintext highlighter-rouge">file</code> dan dengan id <code class="language-plaintext highlighter-rouge">file-name</code>. Perhatikan atribut <code class="language-plaintext highlighter-rouge">x-data</code> pada elemen div, <code class="language-plaintext highlighter-rouge">x-data</code> ini berguna 
untuk menunjukan kepada lib alpine bahwa scope <code class="language-plaintext highlighter-rouge">uploadPage</code> ada diantara dua buah div. dimana nantinya script akan berinterkasi secara reactive.
Kemudian tambahkan penanganan event pada saat form upload diubah menggunakan syntax <code class="language-plaintext highlighter-rouge">@change</code>. Syntax ini kependekan dari <code class="language-plaintext highlighter-rouge">x-on:change</code> dan <code class="language-plaintext highlighter-rouge">$event</code> akan membawa data ke 
fungsi berupa element input.</p>

<p>Kemudian tambahkan tag script pada baris berikutnya, pada atribut <code class="language-plaintext highlighter-rouge">src</code> tambahkan alamat lib alpinejs atau nama file dilokal jika lib sudah didownload.
Jangan lupa dengan atribut <code class="language-plaintext highlighter-rouge">defer</code> atau script tidak akan jalan.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"alpine-3.3.4.min.js"</span> <span class="na">defer</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>Kemudian tambah tag script lain untuk logik upload filenya.
Pertama kita akan membuat event listener untuk event <code class="language-plaintext highlighter-rouge">alpine:init</code></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">alpine:init</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="p">})</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Didalam alpine:init kita definisikan data scope untuk <code class="language-plaintext highlighter-rouge">uploadPage</code> dengan syntax <code class="language-plaintext highlighter-rouge">Alpine.data('nama-scope', anom-func)</code></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">alpine:init</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">Alpine</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="dl">'</span><span class="s1">uploadPage</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="p">}))</span>
<span class="p">})</span></code></pre></figure>

<p>Kemudian kita akan membuat fungsi untuk menghandle upload pada saat file input berubah.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">handleFileUpload</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span>
  <span class="kd">const</span> <span class="nx">formData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">()</span>
  <span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">filename</span><span class="dl">'</span><span class="p">,</span> <span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

  <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">index.php</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">formData</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="o">=&gt;</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">declare</span><span class="p">(</span><span class="n">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$_FILES</span> <span class="k">as</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="s1">'error'</span><span class="p">]</span> <span class="o">!=</span> <span class="no">UPLOAD_ERR_OK</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$tmpName</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">[</span><span class="s1">'tmp_name'</span><span class="p">];</span>
    <span class="nv">$filename</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$tmpName</span><span class="p">,</span> <span class="s2">"public/</span><span class="si">{</span><span class="nv">$filename</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$result</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"public/</span><span class="si">{</span><span class="nv">$filename</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: application/json'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="k">echo</span> <span class="nb">json_encode</span><span class="p">([</span><span class="s1">'result'</span> <span class="o">=&gt;</span> <span class="nv">$result</span><span class="p">]);</span></code></pre></figure>


  </div><a class="u-url" href="/javascript/2021/12/30/upload-file-dengan-plain-javascript-dan-alpine.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper"><div class="footer-col-wrapper">
      <div class="footer-col footer-col-3"><ul class="social-media-list"><li><a href="https://github.com/susilolab"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">susilolab</span></a></li><li><a href="https://instagram.com/mas.agus"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg> <span class="username">mas.agus</span></a></li><li><a href="https://www.twitter.com/susil0"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">susil0</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>&quot;Sebaik-baik manusia adalah yang paling bermanfaat bagi manusia&quot; (HR. Ahmad, ath-Thabrani, ad-Daruqutni)</p>
        <p>&copy;2023&nbsp;Agus Susilo</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
