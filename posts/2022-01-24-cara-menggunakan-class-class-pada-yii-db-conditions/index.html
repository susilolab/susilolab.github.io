<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Cara menggunakan class-class pada yii\db\conditions - susilolab</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi."><meta property="og:image" content><meta property="og:title" content="Cara menggunakan class-class pada yii\db\conditions"><meta property="og:description" content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi."><meta property="og:type" content="article"><meta property="og:url" content="https://susilolab.github.io/posts/2022-01-24-cara-menggunakan-class-class-pada-yii-db-conditions/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-24T06:01:00+00:00"><meta property="article:modified_time" content="2022-01-24T06:01:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cara menggunakan class-class pada yii\db\conditions"><meta name=twitter:description content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi."><script src=https://susilolab.github.io/js/feather.min.js></script><link href=https://susilolab.github.io/css/fonts.eeaf17fd5344c59efcf7fc5c93b898a92cd323eda28c7f1546bbb5f99b42f174.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://susilolab.github.io/css/main.c7dbc780852ad2fc2aae08ae19f1dea5e34c4ef11a83ab0f9b0a025b148de8a1.css></head><body><div class=container><div class=header-wrapper><header class=header-app><div class=main><a href=https://susilolab.github.io/>susilolab</a></div><nav class=navmain><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/portfolio>My Portfolio</a>
<a href=/about>About</a>
<a href=/tags>Tags</a>
<a href=/categories>Categories</a></nav></header></div><div class=border-top></div><div class=content><main><article><div class=title><h1 class=title>Cara menggunakan class-class pada yii\db\conditions</h1><div class=meta><i data-feather=calendar></i> 24 Jan 2022</div><div class=page-categories><a href=/categories/php/>php</a></div></div><section class=body><p>Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace <code>yii\db\conditions</code> yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi.</p><h4 id=simplecondition><strong>SimpleCondition</strong></h4><p>Ok kita mulai dari klas <code>SimpleCondition</code>, sesuai dengan namanya klas ini untuk kondisi yang simple-simple aja. Operator yang dapat diguanakan adalah <code>=</code>, <code>></code>, <code>>=</code>, <code>&lt;</code>, <code>&lt;=</code>, dan <code>!=</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$cond <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($cond)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>one</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// select * from user where id = 1
</span></span></span></code></pre></div><p>Untuk mendapatkan raw sql dari <code>ActiveQuery</code> kita bisa gunakan fungsi <code>getRawSql</code>. Dari contoh kode di atas kita bisa buang <code>one</code> dan tinggal echo seperti ini:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($cond);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// select * from user where id = 1
</span></span></span></code></pre></div><p>Klas <code>SimpleCondition</code> ini bisa kita gabung dengan klas <code>AndCondition</code> atau <code>OrCondition</code> untuk membuat query yang komplek. Untuk menggabungnya kita buat array yang berisi SimpleCondition, lalu kita taruh pada constructor <code>AndCondition</code> atau <code>OrConditon</code>. Kita lihat contohnya berikut:</p><h4 id=andcondition><strong>AndCondition</strong></h4><p>Klas untuk menggabungkan kondisi dari <code>SimpleCondition</code>, <code>OrCondition</code>, <code>AndCondition</code> atau yang kompatible dengan parameter klas ini.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$cond <span style=color:#f92672>=</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>1</span>), <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleConditon</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>2</span>)];
</span></span><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AndCondition</span>($cond);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>all</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// select * user where id = 1 and id = 2
</span></span></span></code></pre></div><h4 id=orcondition><strong>OrCondition</strong></h4><p>Atau dengan <code>OrCondition</code>, cara masih sama kita masukan array yang berisi <code>SimpleCondition</code> kedalam constructor.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$cond <span style=color:#f92672>=</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>1</span>), <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleConditon</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>2</span>)];
</span></span><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>OrCondition</span>($cond);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>all</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// select * user where id = 1 or id = 2
</span></span></span></code></pre></div><p>Dari dua klas ini <code>OrCondition</code> dan <code>AndCondition</code> kita bisa gunakan untuk menggabung query yang lebih komplek.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$cond1 <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;&gt;=&#39;</span>, <span style=color:#ae81ff>1</span>), 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;&lt;=&#39;</span>, <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>$cond2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;level_id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>$cond3 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#e6db74>&#39;admin&#39;</span>);
</span></span><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AndCondition</span>([
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AndCondition</span>([<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>OrCondition</span>($cond1), $cond2]),
</span></span><span style=display:flex><span>    $cond3
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>all</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE (((`id` &gt;= 1) OR (`id` &lt;= 3)) AND (`level_id` = 1)) AND (`username` = &#39;admin&#39;)
</span></span></span></code></pre></div><p>Catatan bahwa <code>AndCondition</code> dan <code>OrCondition</code> hanya bisa menerima array dari <code>SimpleCondition</code> bukan array dari array seperti <code>new AndCondition([[new SimpleCondition, new SimpleCondition]])</code>. atau hasil dari <code>AndCondition</code> dan <code>OrCondition</code> itu sendiri.</p><h4 id=betweencondition><strong>BetweenCondition</strong></h4><p>Kita lanjut ke klas <code>BetweenCondition</code>, klas ini menerima parameter <code>column</code>, <code>operator</code>, <code>intervalStart</code> dan <code>intervalEnd</code>. Parameter operator bisa berupa <code>BETWEEN</code> atau <code>NOT BETWEEN</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BetweenCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;BETWEEN&#39;</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>all</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE `id` BETWEEN 1 AND 4
</span></span></span></code></pre></div><p>Klas ini juga bisa digunakan untuk <code>AndCondition</code> dan <code>OrCondition</code>.</p><h4 id=betweencolumnscondition><strong>BetweenColumnsCondition</strong></h4><p>Klas ini mirip dengan <code>BetweenCondition</code> tetapi intervalnya menggunakan kolumn dari pada value.
Klas ini menerima parameter <code>value</code>, <code>operator</code>, <code>intervalStartColumn</code> dan <code>intervalEndColumn</code>. Parameter operator bisa berupa <code>BETWEEN</code> atau <code>NOT BETWEEN</code>. Untuk melihat perbedaannya kita lihat potongan kode berikut ini:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BetweenColumnsCondition</span>(<span style=color:#ae81ff>10</span>, <span style=color:#e6db74>&#39;BETWEEN&#39;</span>, <span style=color:#e6db74>&#39;min_value&#39;</span>, <span style=color:#e6db74>&#39;max_value&#39;</span>);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>Demo</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `demo` WHERE 10 BETWEEN min_value AND max_value
</span></span></span></code></pre></div><h4 id=existscondition><strong>ExistsCondition</strong></h4><p>Klas ini untuk digunakan untuk memeriksa subquery ada atau tidak, parameter yang harus dilewatkan yaitu <code>operator</code> exists/not exists
dan ekpresi (<code>yii\db\Expression</code>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ExistsCondition</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;EXISTS&#39;</span>, 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\yii\db\Expression</span>(<span style=color:#e6db74>&#39;SELECT level_id FROM user_level WHERE level_id = 1&#39;</span>)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>$rows <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $rows<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE EXISTS 
</span></span></span><span style=display:flex><span><span style=color:#75715e>// SELECT level_id FROM user_level WHERE level_id = 1
</span></span></span></code></pre></div><h4 id=incondition><strong>InCondition</strong></h4><p>Klas ini digunakan untuk query syntax <code>in</code> dan <code>not in</code>. Operator yang bisa digunakan adalah <code>IN</code> dan <code>NOT IN</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>InCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;IN&#39;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE `id` IN (1, 2)
</span></span></span></code></pre></div><h4 id=likecondition><strong>LikeCondition</strong></h4><p>Klas ini untuk query kondisi like, operator yang digunakan bisa berupa <code>like</code>, <code>not like</code>, <code>or like</code>, <code>or not like</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>LikeCondition</span>(<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;LIKE&#39;</span>, <span style=color:#e6db74>&#39;admin&#39;</span>);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE `username` LIKE `%admin%`
</span></span></span></code></pre></div><p>Value bisa berupa string atau array, jika value berupa array maka operator yang akan digunakan adalah <code>AND</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>LikeCondition</span>(<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;LIKE&#39;</span>, [<span style=color:#e6db74>&#39;admin&#39;</span>, <span style=color:#e6db74>&#39;user&#39;</span>]);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE `username` LIKE `%admin%` AND `username` LIKE `%user%`
</span></span></span></code></pre></div><h4 id=notcondition><strong>NotCondition</strong></h4><p>Klas ini digunakan untuk membalik kondisi yang dilewatkan pada parameter. Misalnya pada kode diatas kita mencari username yang
mengandung kata <code>admin</code>, kita bisa balik kondisinya menjadi yang <code>tidak</code> mengandung user <code>admin</code> dengan klas ini.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$likeCond <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>LikeCondition</span>(<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;LIKE&#39;</span>, <span style=color:#e6db74>&#39;admin&#39;</span>);
</span></span><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotCondition</span>($likeCond);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE NOT(`username` LIKE `%admin%`)
</span></span></span></code></pre></div><p>Atau bisa juga untuk membalik kondisi pada saat kita mencari user yang idnya bukan 1</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$eqCond <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SimpleCondition</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;=&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>$where <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotCondition</span>($eqCond);
</span></span><span style=display:flex><span>$row <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>find</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>where</span>($where);
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> $row<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createCommand</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRawSql</span>(), <span style=color:#a6e22e>PHP_EOL</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// SELECT * FROM `user` WHERE NOT(`id` = 1)
</span></span></span></code></pre></div><p>Oke dari klas-klas di atas kita membuat query kondisi komplek yang kemudian dapat digunakan pada kondisi <code>where</code> ActiveQuery/Query.
Dan juga kode kita akan menjadi lebih ringkas karena kita bisa memisahkan query yang komplek kedalam fungsi-fungsi yang lebih kecil.</p><p>Sekian.</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/php>php</a></li><li><a href=/tags/yii>yii</a></li></ul></nav></div></article></main><footer style=display:flex;justify-content:space-between><div style=width:50%><ul class=social-wrapper><li><a class=soc href=https://github.com/susilolab rel=me title=susilolab><i data-feather=github></i><span class=soc-name>GitHub</span></a></li><li><a class=soc href=https://twitter.com/susil0/ rel=me title=susil0><i data-feather=twitter></i><span class=soc-name>Twitter</span></a></li><li><a class=soc href=https://gitlab.com/susilolab/ rel=me title=susilolab><i data-feather=gitlab></i><span class=soc-name>GitLab</span></a></li></ul></div><div class=footer-info><p>"Sebaik-baik manusia adalah yang paling bermanfaat bagi manusia" (HR. Ahmad, ath-Thabrani, ad-Daruqutni)</p><p>2024 © susilolab | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></p></div></footer><script>feather.replace()</script></div></div></body></html>