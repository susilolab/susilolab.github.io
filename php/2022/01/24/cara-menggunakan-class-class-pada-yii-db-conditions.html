<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Cara menggunakan class-class pada yii\db\conditions | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Cara menggunakan class-class pada yii\db\conditions" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi." />
<meta property="og:description" content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi." />
<link rel="canonical" href="https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html" />
<meta property="og:url" content="https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-24T06:01:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cara menggunakan class-class pada yii\db\conditions" />
<script type="application/ld+json">
{"description":"Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\\db\\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi.","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html"},"headline":"Cara menggunakan class-class pada yii\\db\\conditions","dateModified":"2022-01-24T06:01:00+07:00","datePublished":"2022-01-24T06:01:00+07:00","author":{"@type":"Person","name":"Agus Susilo"},"@type":"BlogPosting","url":"https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://susilolab.github.io/feed.xml" title="susilolab" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-173956394-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Cara menggunakan class-class pada yii\db\conditions | susilolab</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Cara menggunakan class-class pada yii\db\conditions" />
<meta name="author" content="Agus Susilo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi." />
<meta property="og:description" content="Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\db\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi." />
<link rel="canonical" href="https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html" />
<meta property="og:url" content="https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html" />
<meta property="og:site_name" content="susilolab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-24T06:01:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cara menggunakan class-class pada yii\db\conditions" />
<script type="application/ld+json">
{"description":"Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace yii\\db\\conditions yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi.","mainEntityOfPage":{"@type":"WebPage","@id":"https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html"},"headline":"Cara menggunakan class-class pada yii\\db\\conditions","dateModified":"2022-01-24T06:01:00+07:00","datePublished":"2022-01-24T06:01:00+07:00","author":{"@type":"Person","name":"Agus Susilo"},"@type":"BlogPosting","url":"https://susilolab.github.io/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
  







</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">susilolab</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/categories/">Categories</a><a class="page-link" href="/portfolio/">My Portfolio</a><a class="page-link" href="/rust-book/">Rust Book</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Cara menggunakan class-class pada yii\db\conditions</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-01-24T06:01:00+07:00" itemprop="datePublished">Jan 24, 2022
      </time>
      
      
      â€¢ categories:  
      
      <a href="/categories/#php">php</a>
      
      
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Hari ini saya ingin membagi tips tentang cara penggunaan class yang ada pada namespace <code class="language-plaintext highlighter-rouge">yii\db\conditions</code> yang berguna saat kita membuat query yang komplek. Yii itu powerfull tetapi dokumentasinya kurang lengkap dan kurangnya contoh-contoh penggunaan klas/fungsi.
<!--more--></p>

<h4 id="simplecondition"><strong>SimpleCondition</strong></h4>

<p>Ok kita mulai dari klas <code class="language-plaintext highlighter-rouge">SimpleCondition</code>, sesuai dengan namanya klas ini untuk kondisi yang simple-simple aja. Operator yang dapat diguanakan adalah <code class="language-plaintext highlighter-rouge">=</code>, <code class="language-plaintext highlighter-rouge">&gt;</code>, <code class="language-plaintext highlighter-rouge">&gt;=</code>, <code class="language-plaintext highlighter-rouge">&lt;</code>, <code class="language-plaintext highlighter-rouge">&lt;=</code>, dan <code class="language-plaintext highlighter-rouge">!=</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$cond</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$cond</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">one</span><span class="p">();</span>
<span class="c1">// select * from user where id = 1</span></code></pre></figure>

<p>Untuk mendapatkan raw sql dari <code class="language-plaintext highlighter-rouge">ActiveQuery</code> kita bisa gunakan fungsi <code class="language-plaintext highlighter-rouge">getRawSql</code>. Dari contoh kode di atas kita bisa buang <code class="language-plaintext highlighter-rouge">one</code> dan tinggal echo seperti ini:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="mf">...</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$cond</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// select * from user where id = 1</span></code></pre></figure>

<p>Klas <code class="language-plaintext highlighter-rouge">SimpleCondition</code> ini bisa kita gabung dengan klas <code class="language-plaintext highlighter-rouge">AndCondition</code> atau <code class="language-plaintext highlighter-rouge">OrCondition</code> untuk membuat query yang komplek. Untuk menggabungnya kita buat array yang berisi SimpleCondition, lalu kita taruh pada constructor <code class="language-plaintext highlighter-rouge">AndCondition</code> atau <code class="language-plaintext highlighter-rouge">OrConditon</code>. Kita lihat contohnya berikut:</p>

<h4 id="andcondition"><strong>AndCondition</strong></h4>

<p>Klas untuk menggabungkan kondisi dari <code class="language-plaintext highlighter-rouge">SimpleCondition</code>, <code class="language-plaintext highlighter-rouge">OrCondition</code>, <code class="language-plaintext highlighter-rouge">AndCondition</code> atau yang kompatible dengan parameter klas ini.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$cond</span> <span class="o">=</span> <span class="p">[</span><span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nc">SimpleConditon</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">2</span><span class="p">)];</span>
<span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AndCondition</span><span class="p">(</span><span class="nv">$cond</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">();</span>
<span class="c1">// select * user where id = 1 and id = 2</span></code></pre></figure>

<h4 id="orcondition"><strong>OrCondition</strong></h4>

<p>Atau dengan <code class="language-plaintext highlighter-rouge">OrCondition</code>, cara masih sama kita masukan array yang berisi <code class="language-plaintext highlighter-rouge">SimpleCondition</code> kedalam constructor.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$cond</span> <span class="o">=</span> <span class="p">[</span><span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nc">SimpleConditon</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">2</span><span class="p">)];</span>
<span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OrCondition</span><span class="p">(</span><span class="nv">$cond</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">();</span>
<span class="c1">// select * user where id = 1 or id = 2</span></code></pre></figure>

<p>Dari dua klas ini <code class="language-plaintext highlighter-rouge">OrCondition</code> dan <code class="language-plaintext highlighter-rouge">AndCondition</code> kita bisa gunakan untuk menggabung query yang lebih komplek.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$cond1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'&gt;='</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> 
    <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'&lt;='</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">];</span>
<span class="nv">$cond2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'level_id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nv">$cond3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="s1">'admin'</span><span class="p">);</span>
<span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AndCondition</span><span class="p">([</span>
    <span class="k">new</span> <span class="nc">AndCondition</span><span class="p">([</span><span class="k">new</span> <span class="nc">OrCondition</span><span class="p">(</span><span class="nv">$cond1</span><span class="p">),</span> <span class="nv">$cond2</span><span class="p">]),</span>
    <span class="nv">$cond3</span>
<span class="p">]);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">();</span>
<span class="c1">// SELECT * FROM `user` WHERE (((`id` &gt;= 1) OR (`id` &lt;= 3)) AND (`level_id` = 1)) AND (`username` = 'admin')</span></code></pre></figure>

<p>Catatan bahwa <code class="language-plaintext highlighter-rouge">AndCondition</code> dan <code class="language-plaintext highlighter-rouge">OrCondition</code> hanya bisa menerima array dari <code class="language-plaintext highlighter-rouge">SimpleCondition</code> bukan array dari array seperti <code class="language-plaintext highlighter-rouge">new AndCondition([[new SimpleCondition, new SimpleCondition]])</code>. atau hasil dari <code class="language-plaintext highlighter-rouge">AndCondition</code> dan <code class="language-plaintext highlighter-rouge">OrCondition</code> itu sendiri.</p>

<h4 id="betweencondition"><strong>BetweenCondition</strong></h4>

<p>Kita lanjut ke klas <code class="language-plaintext highlighter-rouge">BetweenCondition</code>, klas ini menerima parameter <code class="language-plaintext highlighter-rouge">column</code>, <code class="language-plaintext highlighter-rouge">operator</code>, <code class="language-plaintext highlighter-rouge">intervalStart</code> dan <code class="language-plaintext highlighter-rouge">intervalEnd</code>. Parameter operator bisa berupa <code class="language-plaintext highlighter-rouge">BETWEEN</code> atau <code class="language-plaintext highlighter-rouge">NOT BETWEEN</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BetweenCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'BETWEEN'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">();</span>
<span class="c1">// SELECT * FROM `user` WHERE `id` BETWEEN 1 AND 4</span></code></pre></figure>

<p>Klas ini juga bisa digunakan untuk <code class="language-plaintext highlighter-rouge">AndCondition</code> dan <code class="language-plaintext highlighter-rouge">OrCondition</code>.</p>

<h4 id="betweencolumnscondition"><strong>BetweenColumnsCondition</strong></h4>

<p>Klas ini mirip dengan <code class="language-plaintext highlighter-rouge">BetweenCondition</code> tetapi intervalnya menggunakan kolumn dari pada value.
Klas ini menerima parameter <code class="language-plaintext highlighter-rouge">value</code>, <code class="language-plaintext highlighter-rouge">operator</code>, <code class="language-plaintext highlighter-rouge">intervalStartColumn</code> dan <code class="language-plaintext highlighter-rouge">intervalEndColumn</code>. Parameter operator bisa berupa <code class="language-plaintext highlighter-rouge">BETWEEN</code> atau <code class="language-plaintext highlighter-rouge">NOT BETWEEN</code>. Untuk melihat perbedaannya kita lihat potongan kode berikut ini:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BetweenColumnsCondition</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'BETWEEN'</span><span class="p">,</span> <span class="s1">'min_value'</span><span class="p">,</span> <span class="s1">'max_value'</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">Demo</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `demo` WHERE 10 BETWEEN min_value AND max_value</span></code></pre></figure>

<h4 id="existscondition"><strong>ExistsCondition</strong></h4>

<p>Klas ini untuk digunakan untuk memeriksa subquery ada atau tidak, parameter yang harus dilewatkan yaitu <code class="language-plaintext highlighter-rouge">operator</code> exists/not exists 
dan ekpresi (<code class="language-plaintext highlighter-rouge">yii\db\Expression</code>).</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ExistsCondition</span><span class="p">(</span>
    <span class="s1">'EXISTS'</span><span class="p">,</span> 
    <span class="k">new</span> <span class="err">\</span><span class="nf">yii\db\Expression</span><span class="p">(</span><span class="s1">'SELECT level_id FROM user_level WHERE level_id = 1'</span><span class="p">)</span>
<span class="p">);</span>
<span class="nv">$rows</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$rows</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE EXISTS </span>
<span class="c1">// SELECT level_id FROM user_level WHERE level_id = 1</span></code></pre></figure>

<h4 id="incondition"><strong>InCondition</strong></h4>

<p>Klas ini digunakan untuk query syntax <code class="language-plaintext highlighter-rouge">in</code> dan <code class="language-plaintext highlighter-rouge">not in</code>. Operator yang bisa digunakan adalah <code class="language-plaintext highlighter-rouge">IN</code> dan <code class="language-plaintext highlighter-rouge">NOT IN</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'IN'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE `id` IN (1, 2)</span></code></pre></figure>

<h4 id="likecondition"><strong>LikeCondition</strong></h4>

<p>Klas ini untuk query kondisi like, operator yang digunakan bisa berupa <code class="language-plaintext highlighter-rouge">like</code>, <code class="language-plaintext highlighter-rouge">not like</code>, <code class="language-plaintext highlighter-rouge">or like</code>, <code class="language-plaintext highlighter-rouge">or not like</code></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LikeCondition</span><span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="s1">'LIKE'</span><span class="p">,</span> <span class="s1">'admin'</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE `username` LIKE `%admin%`</span></code></pre></figure>

<p>Value bisa berupa string atau array, jika value berupa array maka operator yang akan digunakan adalah <code class="language-plaintext highlighter-rouge">AND</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LikeCondition</span><span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="s1">'LIKE'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'admin'</span><span class="p">,</span> <span class="s1">'user'</span><span class="p">]);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE `username` LIKE `%admin%` AND `username` LIKE `%user%`</span></code></pre></figure>

<h4 id="notcondition"><strong>NotCondition</strong></h4>

<p>Klas ini digunakan untuk membalik kondisi yang dilewatkan pada parameter. Misalnya pada kode diatas kita mencari username yang 
mengandung kata <code class="language-plaintext highlighter-rouge">admin</code>, kita bisa balik kondisinya menjadi yang <code class="language-plaintext highlighter-rouge">tidak</code> mengandung user <code class="language-plaintext highlighter-rouge">admin</code> dengan klas ini.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$likeCond</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LikeCondition</span><span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="s1">'LIKE'</span><span class="p">,</span> <span class="s1">'admin'</span><span class="p">);</span>
<span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NotCondition</span><span class="p">(</span><span class="nv">$likeCond</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE NOT(`username` LIKE `%admin%`)</span></code></pre></figure>

<p>Atau bisa juga untuk membalik kondisi pada saat kita mencari user yang idnya bukan 1</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$eqCond</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleCondition</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'='</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nv">$where</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NotCondition</span><span class="p">(</span><span class="nv">$eqCond</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nc">User</span><span class="o">::</span><span class="nf">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="nf">createCommand</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRawSql</span><span class="p">(),</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="c1">// SELECT * FROM `user` WHERE NOT(`id` = 1)</span></code></pre></figure>

<p>Oke dari klas-klas di atas kita membuat query kondisi komplek yang kemudian dapat digunakan pada kondisi <code class="language-plaintext highlighter-rouge">where</code> ActiveQuery/Query. 
Dan juga kode kita akan menjadi lebih ringkas karena kita bisa memisahkan query yang komplek kedalam fungsi-fungsi yang lebih kecil.</p>

<p>Sekian.</p>

  </div><a class="u-url" href="/php/2022/01/24/cara-menggunakan-class-class-pada-yii-db-conditions.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper"><div class="footer-col-wrapper">
      <div class="footer-col footer-col-3"><ul class="social-media-list"><li><a href="https://github.com/susilolab"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">susilolab</span></a></li><li><a href="https://instagram.com/mas.agus"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg> <span class="username">mas.agus</span></a></li><li><a href="https://www.twitter.com/susil0"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">susil0</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>&quot;Sebaik-baik manusia adalah yang paling bermanfaat bagi manusia&quot; (HR. Ahmad, ath-Thabrani, ad-Daruqutni)</p>
        <p>&copy;2022&nbsp;Agus Susilo</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
